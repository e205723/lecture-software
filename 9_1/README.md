# 遅延評価とソフトウェアメンテナンスとの関連

遅延評価という仕組みはソフトウェアメンテナンスにおいてデメリットが多く、言語仕様に含めると実用的な活用が難しい。

コードは中身が変わらずとも、言語やフレームワークのバージョンやエコシステムの変化で経年劣化する。コードの経年劣化は避けることができないので、エンジニア達は変更や拡張を加えやすいコードを目指してプログラミングをする。

正規化、カリーハワード対応、合流性、CCCなどの概念を含む関数型言語は、言語仕様により破壊的操作などのバッドプラクティスができないようなっているので、エンジニアが目指している「劣化に耐えるコード」の構築の手助けをしてくれる。破壊代入のある言語でも関数型言語の書き方に倣って、副作用のある箇所、純粋関数のみを含む箇所、依存性が注入されている箇所など複数のレイヤーに分けて実装したりするなどしてコードを記述することで経年劣化に強いコードを書くことができる。

そのようなソフトウェアメンテナンスにおいて大いなる貢献をした関数型言語の代表例に「遅延評価」という関数型言語として重要な特性を持つHaskellが存在する。遅延評価とは引数が必要になるまで評価しない、つまり、遅延評価は利用しない引数を評価しないことで計算量を最適化する評価戦略である。Haskellは遅延評価の他に型推論、モナド、STMという概念を含むが、型推論などの一部の概念は関数型言語とは直行している概念なので注意が必要である。

遅延評価によって不要な計算を減らすことができたり、無限長の長さのリストを扱うことができたりするが、それ以上のデメリットとして、意図する順番での操作の実行、メモリの制御、スタックトレースなどが難しいあるいはできないことが挙げられる。特に並列プログラミングにおいては、遅延評価との相性は悪い。遅延評価のデメリットが関数型言語の利点を上回り、ソフトウェアメンテナンスへの実用的な活用を難しくしている。

以上の理由により、遅延評価という概念は言語仕様に含めると実用的な活用が難しいと考察する。
